/* eslint-disable @typescript-eslint/no-var-requires */
/* eslint-disable @typescript-eslint/restrict-template-expressions */
/* eslint-disable @typescript-eslint/no-misused-promises */
/* eslint-disable @typescript-eslint/no-unsafe-call */
/* eslint-disable @typescript-eslint/no-unsafe-argument */
/* eslint-disable @typescript-eslint/no-unsafe-member-access */
/* eslint-disable @typescript-eslint/no-unsafe-assignment */
import React, { useState, useEffect } from 'react';
import axios from 'axios';
import { useRef } from 'react';
import { connect } from 'react-redux';
import { addUserInfo, deleteUserInfo } from '../../redux/actions/index';
// import userApi from '../../../api/user';
import styled from 'styled-components';
import background from '../../img/diaryBackground.png';
import homeIndex from '../../img/homeIndex.png';
import edit from '../../img/edit.jpg';
import nothing from '../../img/profileImg.png';
import { useNavigate } from 'react-router-dom';
import ErrorPage from '../../pages/ErrorPage';

const AWS = require('aws-sdk/dist/aws-sdk-react-native');

const Wrapper = styled.div`
  width: 100vw;
  height: 100vh;
  background-image: url(${background});
`;

const Book = styled.div`
  //border: solid 2px red;
  height: 100vh;
  width: 90vw;
  display: flex;
  justify-content: center;
  align-items: center;
  padding-left: 1em;
  position: relative;
  left: 8rem;
`;
const Left = styled.div`
  //border: dotted 2px green;
  display: flex;
  justify-content: center;
  align-items: center;
  width: 32vw;
  height: 85vh;
  padding-left: 1em;
  background-color: white;
  border-radius: 30px 20px 20px 30px;
  box-shadow: 10px 10px 30px #3c4a5645;
  border-right: #b1b0b0 solid 2px;
`;

const Right = styled.div`
  //border: solid 2px black;
  width: 32vw;
  height: 85vh;
  background-color: white;
  padding-left: 1em;
  border-radius: 20px 30px 30px 20px;
  box-shadow: 30px 10px 10px #3c4a5645;
  border-left: #b1b0b0 solid 2px;
`;
const Index = styled.div`
  display: flex;
  flex-direction: column;
  height: 80vh;
  //border: solid 2px black;
`;
const TagHome = styled.img`
  width: 7rem;
  height: 4.5rem;
  cursor: pointer;
  &:hover {
    transform: scale(1.05);
    cursor: pointer;
  }
  //border: solid 2px black;
`;

/// ÏÑ∏Î∂ÄÏÇ¨Ìï≠

const Img = styled.img`
  border: solid #bbbabe 3px;
  padding: 0.5rem;
  box-sizing: border-box;
  width: 15vw;
  height: 28vh;
  border-radius: 100%;
`;
const UpdateProfileBox = styled.div`
  //border: solid 2px red;
  height: 80vh;
  display: flex;
  flex-direction: column;
  justify-content: space-evenly;
  align-items: center;
  box-sizing: border-box;
`;
const Title = styled.div`
  //border: solid 2px teal;
  font-size: 2rem;
  font-weight: 900;
  margin-top: 2.5rem;
  background: linear-gradient(to right, #a396f8, #d06be0, #fd40c8);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
`;
const Form = styled.form<{ Left?: any }>`
  //border: dotted 2px red;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: ${(props) => (props.Left ? 'center' : null)};
  width: 30vw;
  height: ${(props) => (props.Left ? '60vh' : '50vh')};
  box-sizing: border-box;
`;
const InputBox = styled.div<{ button?: any }>`
  //border: solid 2px aqua;
  height: 3.3rem;
  margin-top: ${(props) => (props.button ? '2rem' : '0')};
  box-sizing: border-box;
`;
const Message = styled.div<{ UpdateProfile?: any }>`
  // border: solid 2px green;
  height: 1.7rem;
  padding-top: 3px;
  box-sizing: border-box;
  font-size: 15px;
  text-align: left;
  opacity: 0.5;
  margin-top: ${(props) => (props.UpdateProfile ? '1rem' : '0')};
  margin-bottom: ${(props) => (props.UpdateProfile ? '0.2rem' : '0')};
  position: relative;
  right: 15px;
`;
const Input = styled.input<{ Check?: any }>`
  height: 3rem;
  width: ${(props) => (props.Check ? '65%' : '77%')};
  border-radius: 30px;
  box-sizing: border-box;
  box-shadow: 0 3px 5px #3c4a5645;
  text-decoration: none;
  font-size: large;
  outline: none;
  padding: 0 1em;
  border: 0;
  opacity: 0.6;
  font-weight: bolder;
`;
const Button = styled.button<{ MyPageButton?: any; Return?: any }>`
  //border: solid 2px green;
  width: ${(props) => (props.MyPageButton ? '20rem' : '12rem')};
  width: ${(props) => (props.Return ? '12rem' : null)};
  height: 3rem;
  border-radius: 30px;
  box-sizing: border-box;
  border: 0;
  box-shadow: 0 5px 14px #3c4a5645;
  text-decoration: none;
  font-size: large;
  background: linear-gradient(to right, #a396f8, #d06be0, #fd40c8);
  cursor: pointer;
  font-size: large;
  font-weight: bold;
  color: white;
  // margin-top: ${(props) => (props.MyPageButton ? '1rem' : '0')};
  margin: 0.1rem;
`;

const CheckButton = styled.button`
  background: linear-gradient(to right, #a396f8, #d06be0, #fd40c8);
  //width: 4rem;
  box-shadow: 0 5px 14px #3c4a5645;
  box-sizing: border-box;
  color: white;
  border-radius: 10px;
  margin: 0.1rem;
  margin-left: 0.2rem;
  padding: 0.1rem;
`;

const Div = styled.div`
  //border: 2px dotted black;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  width: 20rem;
  height: 50%;
  /* height: 2rem;
  border-top: solid purple 1px;
  opacity: 0.3;
  font-size: 0.9rem;
  margin-top: 0.7rem;
  padding: 0.7rem 0rem; */
  //border: solid 2px green;
`;

const Box = styled.div`
  //border: red solid 2px;
  display: flex;
  justify-content: center;
  text-align: center;
`;
const BoxMessage = styled.div`
  display: flex;
  margin-left: 5.3rem;
  text-align: center;
  padding-right: 7rem;
`;
const Profile = styled.div`
  //border: solid 2px #ffc7c7;
  width: 19vw;
  height: 28vh;
  border-radius: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  margin-bottom: 2rem;
`;
const Edit = styled.img`
  //border: solid green 2px;
  width: 6rem;
  height: 5rem;
  position: relative;
  bottom: 5.5rem;
  left: 3rem;
  border-radius: 100%;
  margin: 0;
  padding: 0;
  &:hover {
    cursor: pointer;
    opacity: 0.6;
  }
`;
const StatusMessage = styled.div`
  font-weight: bolder;
  font-size: 1.2rem;
  color: #5f5e5e;
  margin-top: 1rem;
`;

// input file(ÌîÑÎ°úÌïÑ Î≥ÄÍ≤ΩÌÉúÍ∑∏, Ïù¥ Î∂ÄÎ∂Ñ Ïà®ÍπÄ)
const InputProfile = styled.input`
  visibility: hidden;
  /*  border: solid 2px red;
  width: 10rem;
  height: 10rem; */
`;

function MyPage(props: any) {
  const navigate = useNavigate();

  const { userInfoToStore, user, deleteUserInfo } = props;
  console.log(userInfoToStore);
  const { isLogin, accessToken } = props.user;

  if (isLogin === false) {
    setTimeout(() => {
      alert('Î°úÍ∑∏Ïù∏Ìï¥Ï£ºÏÑ∏Ïöî');
      navigate('/login');
      return;
    }, 1000);
  }

  const { email, loginMethod, nickname, statusMessage, userImage } =
    props.user.userInfo;
  const [updateProfile, setUpdateProfile] = useState(false);
  const [withdraw, setWithdraw] = useState(false);

  // üëâ ÌîÑÎ°úÌïÑ ÏàòÏ†ï ÌååÌä∏
  const inputNickname: any = useRef();
  const statusmessage: any = useRef();

  const [nicknamecheckMessage, setNicknameCheckMessage] = useState('');
  const [nicknameValidate, setNicknameValidate] = useState(false);
  const [nicknameState, setNicknameState] = useState(false);
  // ÏàòÏ†ïÌï† Ïú†Ï†ÄÏ†ïÎ≥¥
  const [updateUserInfo, setUpdateUserInfo] = useState({
    email,
    nickname,
    statusMessage,
    userImage,
  });

  const updateInfo = (e: any) => {
    setUpdateUserInfo({ ...updateUserInfo, [e.target.name]: e.target.value });
  };

  const hadleNicknameValidation = (e: any) => {
    updateInfo(e);

    if (e.target.value.length === 1 || e.target.value.length > 20) {
      setNicknameCheckMessage('ÎãâÎÑ§ÏûÑÏùÄ 2~20Ïûê Ïù¥ÎÇ¥ÏûÖÎãàÎã§.');
      setNicknameValidate(false); // ÎãâÎÑ§ÏûÑÏú†Ìö®ÏÑ± Í≤∞Í≥º ÌÜµÍ≥º
    } else {
      setNicknameCheckMessage('');
      setNicknameValidate(true);
    }
  };
  const [nicknamecheck, setNicknameCheck] = useState(nickname);

  // Ïù¥ÎØ∏ÏßÄ Ìé∏Ïßë
  const file: any = useRef();
  /*  console.log(file.current.value); */

  //ÎãâÎÑ§ÏûÑ Ï§ëÎ≥µÍ≤ÄÏÇ¨
  const nicknameCheck = async (e: any) => {
    // console.log(nicknameState); //Ï§ëÎ≥µ Í≤ÄÏÇ¨ Ïó¨Î∂Ä
    e.preventDefault();
    const { nickname } = updateUserInfo;
    //  console.log(nickname);
    if (nicknameValidate === true && inputNickname.current.value !== '') {
      try {
        await axios
          .get(`http://localhost:5000/user/nicknamecheck/${nickname}`)
          .then((res) => {
            if (res.data === false) {
              //   console.log(res.data, 'Ï§ëÎ≥µ Í≤ÄÏÇ¨ ÌÜµÍ≥º');
              //ÎãâÎÑ§ÏûÑ ÏÇ¨Ïö©Ïó¨Î∂ÄÎ•º booleanÍ∞íÏúºÎ°ú Í∞ÄÏ†∏Ïò¥ falseÏùºÍ≤ΩÏö∞ ÏÇ¨Ïö© Í∞ÄÎä• ÎãâÎÑ¥
              setNicknameCheckMessage('ÏÇ¨Ïö©Ìï† Ïàò ÏûàÎäî ÎãâÎÑ§ÏûÑÏûÖÎãàÎã§.');
              setNicknameCheck(nickname); // ÎÇòÏ§ëÏóê ÏàòÏ†ïÏôÑÎ£å Î≤ÑÌäºÏùÑ ÎàÑÎ•º Ïãú  e.target.valueÍ≥º nicknamecheckÏùò Ï†ïÎ≥¥Í∞Ä ÏùºÏπòÌïòÎäîÏßÄÎ•º ÌôïÏù∏
              setNicknameState(true);
            } else {
              setNicknameCheckMessage('Ïù¥ÎØ∏ ÏÇ¨Ïö©Ï§ëÏù∏ ÎãâÎÑ§ÏûÑÏûÖÎãàÎã§');
            }
          });
      } catch (error) {
        console.log('error');
      }
    } else {
      alert('ÎãâÎÑ§ÏûÑ Ï°∞Í±¥ÏùÑ Ï∂©Ï°±ÏãúÏºúÏ£ºÏÑ∏Ïöî');
    }
  };

  // ÏàòÏ†ïÏôÑÎ£å
  const updateFinish = async (e: any) => {
    e.preventDefault();
    const { email, nickname, statusMessage, userImage } = updateUserInfo;
    // console.log(email, nickname, statusMessage, nicknamecheck, 'üôã‚Äç‚ôÄÔ∏è');
    if (inputNickname.current.value === '') {
      updateUserInfo.nickname = inputNickname.current.placeholder;
      //console.log(nickname, 'nickname');
    }
    if (nickname !== nicknamecheck && inputNickname.current.value !== '') {
      console.log(nickname, nicknamecheck);
      alert('Ï§ëÎ≥µÍ≤ÄÏÇ¨Î•º ÏãúÌñâÌï¥Ï£ºÏÑ∏Ïöî');
      return;
    } else {
      try {
        await axios
          .patch(
            'http://localhost:5000/mypage/update',
            { nickname, statusMessage, userImage },
            {
              headers: { authorization: `Bearer ${accessToken}` },
            }
          )
          .then((res) => {
            const {
              id,
              email,
              loginMethod,
              nickname,
              statusMessage,
              userImage,
            } = res.data.data;
            //console.log('hi');
            void userInfoToStore(
              { id, email, loginMethod, nickname, statusMessage, userImage },
              accessToken
            );
            alert('ÏàòÏ†ïÏù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§.');
            setUpdateProfile(!updateProfile);
            setUpdateProfile(true);
            setNicknameCheckMessage('');
          });
      } catch (error) {
        console.log('error');
      }
    }
  };

  // üëâ ÌÉàÌá¥ÌïòÍ∏∞
  const inputPassword: any = useRef();
  const inputPasswordCheck: any = useRef();
  const [passwordValue, setPasswordValue] = useState({
    password: '',
    passwordCheck: '',
  });

  const handlePassword = (e: any) => {
    setPasswordValue({ ...passwordValue, [e.target.name]: e.target.value });
    // console.log(passwordValue);
  };

  //ÌÉàÌá¥ÌïòÍ∏∞ Î≤ÑÌäº
  const withdrawl = async (e: any) => {
    e.preventDefault();
    const { password, passwordCheck } = passwordValue;
    if (password !== passwordCheck || password === '') {
      alert('ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî');
      return;
    } else {
      try {
        if (
          !window.confirm(
            'Ï†ïÎßê ÌÉàÌá¥ÌïòÏãúÍ≤†ÏäµÎãàÍπå? ÌÉàÌá¥Ìïú Í≥ÑÏ†ïÏùò Îç∞Ïù¥ÌÑ∞Îäî Î≥µÍµ¨Í∞Ä Î∂àÍ∞ÄÌï©ÎãàÎã§.'
          )
        ) {
          return;
        } else {
          await axios
            .delete('http://localhost:5000/mypage/withdrawl', {
              data: { password: passwordCheck },
              headers: { authorization: `Bearer ${accessToken}` },
            })
            .then((res) => {
              if (res.data.statusCode === 200) {
                console.log('ÌÉàÌá¥ÏÑ±Í≥µ');
                void deleteUserInfo();
                setTimeout(() => {
                  alert('Í≥ÑÏ†ï ÌÉàÌá¥Ïóê ÏÑ±Í≥µÌñàÏäµÎãàÎã§');
                  navigate('/mainfeed', { replace: true });
                }, 2000);
              } else {
                console.log('ÌÉàÌá¥Ïã§Ìå®');
                alert('ÌÉàÌá¥Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§. ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî');
              }
            });
        }
      } catch (error) {
        console.log('server error');
      }
    }
  };

  //* aws-ÌîÑÎ°úÌïÑ Ïù¥ÎØ∏ÏßÄ Ïó∞Í≤∞ *//
  AWS.config.update({
    region: 'us-east-1', // congito IdentityPoolId Î¶¨Ï†ÑÏùÑ Î¨∏ÏûêÏó¥Î°ú ÏûÖÎ†•ÌïòÍ∏∞. ÏïÑÎûò ÌôïÏù∏ (Ex. "ap-northeast-2")
    credentials: new AWS.CognitoIdentityCredentials({
      IdentityPoolId: 'us-east-1:156ae187-f9d1-49d9-86f7-ad7f49675cbd', // cognito Ïù∏Ï¶ù ÌíÄÏóêÏÑú Î∞õÏïÑÏò® ÌÇ§Î•º Î¨∏ÏûêÏó¥Î°ú ÏûÖÎ†•ÌïòÍ∏∞. (Ex. "ap-northeast-2...")
    }),
  });

  const firstImgHandle = async (e: any) => {
    const imageFile = e.target.files[0]; // ÏóÖÎ°úÎìúÎêú ÌååÏùº Í∞ùÏ≤¥

    if (!imageFile) {
      return setUpdateUserInfo({
        ...updateUserInfo,
        [e.target.name]: 'nothing',
      });
    }
    setUpdateUserInfo({ ...updateUserInfo, [e.target.name]: imageFile });

    const upload = new AWS.S3.ManagedUpload({
      params: {
        Bucket: 'profileimage-pickshare', // ÏóÖÎ°úÎìúÌï† ÎåÄÏÉÅ Î≤ÑÌÇ∑Î™Ö Î¨∏ÏûêÏó¥Î°ú ÏûëÏÑ±.
        Key: imageFile.name, //ÏóÖÎ°úÎìúÌï† ÌååÏùºÎ™Ö
        Body: imageFile, // ÏóÖÎ°úÎìúÌï† ÌååÏùº Í∞ùÏ≤¥
      },
    });

    const promise = upload.promise();

    await promise.then(
      function (data: { Location: any }) {
        setUpdateUserInfo({
          ...updateUserInfo,
          [e.target.name]: data.Location,
        });
      },
      function (err: any) {
        console.log(err, 'ÏÇ¨ÏßÑÎì±Î°ù Ïã§Ìå®');
      }
    );
  };

  //console.log(userImage); // ÎîîÎπÑÏóê Ï†ÄÏû•Îêú Ï†ïÎ≥¥
  //ÏûÑÏãú Ï†ÄÏû•ÏÜå (ÎîîÎπÑÏóê Ï†ÄÏû•Îêú Ï†ïÎ≥¥ÏôÄ ÎπÑÍµêÌï¥ÏÑú ÌîÑÎ°úÌïÑ Ïù¥ÎØ∏ÏßÄ ÏàòÏ†ïÌï†Îïå Î≥¥Ïó¨Ï§ÑÍ≤ÉÏûÑ)
  const preUserImage: string = updateUserInfo.userImage;
  //console.log(preUserImage);
  return (
    <>
      {!isLogin ? (
        <>
          <ErrorPage text="PICKSHARE" />
        </>
      ) : (
        <Wrapper>
          <Book>
            <Left>
              {updateProfile === true && withdraw === false ? (
                <>
                  <Form Left>
                    <Div>
                      <Profile>
                        {userImage === 'nothing' ? (
                          <>
                            <Img src={nothing} />
                          </>
                        ) : userImage !== preUserImage ? (
                          <Img src={preUserImage} />
                        ) : (
                          <>
                            <Img src={userImage} />
                          </>
                        )}
                      </Profile>
                      <label htmlFor="imgUpload">
                        <Edit src={edit} />
                      </label>
                    </Div>
                    <Input
                      type="text"
                      ref={statusmessage}
                      name="statusMessage"
                      placeholder={statusMessage}
                      onChange={updateInfo}
                    />
                    <InputProfile
                      type="file"
                      id="imgUpload"
                      ref={file}
                      accept="image/*"
                      onChange={firstImgHandle}
                      name="userImage"
                    ></InputProfile>
                  </Form>
                </>
              ) : (
                <>
                  <Form Left>
                    <Div>
                      <Profile>
                        {userImage === 'nothing' ? (
                          <>
                            <Img src={nothing} />
                          </>
                        ) : (
                          <>
                            <Img src={userImage} />
                          </>
                        )}
                      </Profile>
                    </Div>
                    <StatusMessage>{statusMessage}</StatusMessage>
                  </Form>
                </>
              )}
            </Left>
            <Right>
              <UpdateProfileBox>
                {updateProfile === true && withdraw === false ? (
                  <>
                    <Title>ÌîÑÎ°úÌïÑ ÏàòÏ†ï</Title>
                    <Form>
                      <BoxMessage>
                        <Message UpdateProfile>Ïù¥Î©îÏùº</Message>
                      </BoxMessage>
                      <InputBox>
                        <Box>
                          <Input
                            ref={inputNickname}
                            value={email}
                            disabled
                            style={{ color: '#F548CC', fontWeight: 'bolder' }}
                          />
                        </Box>
                      </InputBox>
                      <BoxMessage>
                        <Message UpdateProfile>ÎãâÎÑ§ÏûÑ</Message>
                      </BoxMessage>
                      <InputBox>
                        <Box>
                          <Input
                            Check
                            type="text"
                            ref={inputNickname}
                            name="nickname"
                            placeholder={nickname}
                            onChange={hadleNicknameValidation}
                          />
                          <CheckButton onClick={nicknameCheck}>
                            Ï§ëÎ≥µÍ≤ÄÏÇ¨
                          </CheckButton>
                        </Box>
                        <div>{nicknamecheckMessage}</div>
                      </InputBox>
                      <InputBox button>
                        <Box>
                          <Button
                            onClick={() => {
                              setUpdateProfile(!updateProfile);
                              setNicknameCheckMessage('');
                              setNicknameCheck('');
                              setUpdateUserInfo({
                                ...updateUserInfo,
                                userImage: userImage,
                              });
                            }}
                          >
                            Ï∑®ÏÜå
                          </Button>
                          <Button onClick={updateFinish}>ÏàòÏ†ïÏôÑÎ£å</Button>
                        </Box>
                      </InputBox>
                    </Form>
                  </>
                ) : updateProfile === false && withdraw === true ? (
                  <>
                    <Title>ÌöåÏõêÌÉàÌá¥ </Title>
                    <Form>
                      <BoxMessage>
                        <Message UpdateProfile>ÎπÑÎ∞ÄÎ≤àÌò∏</Message>
                      </BoxMessage>
                      <InputBox>
                        <Box>
                          <Input
                            ref={inputPassword}
                            name="password"
                            type="text"
                            onChange={handlePassword}
                          />
                        </Box>
                      </InputBox>
                      <BoxMessage>
                        <Message UpdateProfile>ÎπÑÎ∞ÄÎ≤àÌò∏ ÌôïÏù∏</Message>
                      </BoxMessage>
                      <InputBox>
                        <Box>
                          <Input
                            ref={inputPasswordCheck}
                            type="text"
                            name="passwordCheck"
                            onChange={handlePassword}
                          />
                        </Box>
                      </InputBox>
                      <InputBox button>
                        <Box>
                          <Button
                            Return
                            MyPageButton
                            onClick={() => {
                              setWithdraw(!withdraw);
                              console.log(updateProfile);
                            }}
                          >
                            ÎêòÎèåÏïÑÍ∞ÄÍ∏∞
                          </Button>
                          <Button onClick={withdrawl}>ÌÉàÌá¥ÌïòÍ∏∞</Button>
                        </Box>
                      </InputBox>
                    </Form>
                  </>
                ) : (
                  <>
                    <Title>ÎßàÏù¥ÌéòÏù¥ÏßÄ</Title>
                    <Form>
                      <Box>
                        <Button
                          MyPageButton
                          onClick={() => {
                            setUpdateProfile(!updateProfile);
                          }}
                        >
                          ÌîÑÎ°úÌïÑÏàòÏ†ï
                        </Button>
                      </Box>
                      <Box>
                        <Button
                          MyPageButton
                          onClick={() => {
                            setWithdraw(!withdraw);
                          }}
                        >
                          ÌÉàÌá¥ÌïòÍ∏∞
                        </Button>
                      </Box>
                    </Form>
                  </>
                )}
              </UpdateProfileBox>
            </Right>
            <Index>
              <TagHome
                src={homeIndex}
                onClick={() => {
                  navigate('/mainfeed', { replace: true });
                }}
              ></TagHome>
            </Index>
          </Book>
        </Wrapper>
      )}
    </>
  );
}
//reduxÎ°ú ÏÉÅÌÉúÍ¥ÄÎ¶¨
const mapStateToProps = (state: any) => {
  return {
    user: state.userInfo,
  };
};
const mapDispatchToProps = (dispatch: any) => {
  return {
    userInfoToStore: (userInfo: object, token: string) => {
      dispatch(addUserInfo(userInfo, token));
    },
    deleteUserInfo: () => {
      dispatch(deleteUserInfo());
    },
  };
};

export default connect(mapStateToProps, mapDispatchToProps)(MyPage);
